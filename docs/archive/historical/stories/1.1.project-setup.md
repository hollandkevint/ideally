# Story 1.1: Project Setup & Development Foundation

## Status

**Current Status:** Draft

## Story

**As a** developer,  
**I want** a fully configured development environment with dual-pane architecture support,  
**so that** I can rapidly build and deploy the strategic thinking workspace.

## Acceptance Criteria

1. Next.js 14+ project with TypeScript and optimized for dual-pane layout
2. Tailwind CSS configured with custom design system for strategic workspace aesthetics  
3. Supabase integration for user authentication and workspace persistence
4. Vercel deployment pipeline with preview deployments for rapid iteration
5. Basic error tracking (Sentry) and performance monitoring integrated
6. Development environment supports hot-reload for both chat and canvas components

## Tasks / Subtasks

- [ ] **Project Initialization** (AC: 1)
  - [ ] Create Next.js 14+ project with TypeScript template
  - [ ] Configure monorepo structure with npm workspaces
  - [ ] Set up packages: shared, ui, bmad-engine, canvas-engine
  - [ ] Configure TypeScript paths for cross-package imports

- [ ] **UI Foundation Setup** (AC: 2)
  - [ ] Install and configure Tailwind CSS
  - [ ] Create custom design system configuration
  - [ ] Set up dual-pane layout primitives
  - [ ] Configure responsive breakpoints for strategic workspace

- [ ] **Supabase Integration** (AC: 3)
  - [ ] Create Supabase project and configure environment variables
  - [ ] Install Supabase client libraries
  - [ ] Set up authentication configuration
  - [ ] Create basic database schema for workspace persistence
  - [ ] Test connection and authentication flow

- [ ] **Deployment Pipeline** (AC: 4)
  - [ ] Connect repository to Vercel
  - [ ] Configure build settings and environment variables
  - [ ] Set up preview deployments for feature branches
  - [ ] Test deployment pipeline with sample commit

- [ ] **Monitoring Integration** (AC: 5)
  - [ ] Install and configure Sentry for error tracking
  - [ ] Set up Vercel Analytics for performance monitoring
  - [ ] Configure error boundaries for dual-pane components
  - [ ] Test error reporting and performance tracking

- [ ] **Development Environment** (AC: 6)
  - [ ] Configure hot-reload for dual-pane components
  - [ ] Set up development scripts (dev, build, lint, test)
  - [ ] Create development documentation and setup guide
  - [ ] Test full development workflow end-to-end

## Dev Notes

Based on the architecture document, here are the complete implementation details for this story:

### Technical Stack Configuration

**Frontend Framework:** Next.js 14.1.0+ with App Router
- Use `create-next-app` with TypeScript template
- Enable experimental features for dual-pane layouts
- Configure App Router for nested layouts supporting chat/canvas split

**Monorepo Structure:**
```
ideally-co/
├── apps/web/                   # Next.js frontend application
├── packages/
│   ├── shared/                 # TypeScript interfaces and utilities
│   ├── bmad-engine/           # YAML template parser and coaching logic
│   ├── canvas-engine/         # Canvas rendering engine
│   └── ui/                    # Reusable UI components
```

**State Management:** 
- Zustand ^4.4.0 for dual-pane synchronization
- SWR ^2.2.0 for coaching template caching and real-time updates

**Database Schema (Initial):**
```sql
-- Core tables from architecture document
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email TEXT UNIQUE NOT NULL,
    profile JSONB,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE strategic_workspaces (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    owner_id UUID REFERENCES users(id),
    title TEXT NOT NULL,
    workspace_state JSONB NOT NULL DEFAULT '{}'
);
```

**Environment Variables Required:**
```bash
# Frontend (.env.local)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# Monitoring
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn
SENTRY_AUTH_TOKEN=your_sentry_auth_token
```

**Key Architecture Decisions:**
- Vercel Edge Network deployment for global CDN distribution
- Supabase Row Level Security for multi-tenant isolation
- TypeScript ^5.3.0 throughout stack for type safety
- Tailwind CSS ^3.4.0 with custom dual-pane utilities

### Testing

**Testing Standards from Architecture:**

**Test File Location:** 
- Frontend tests: `apps/web/tests/`
- Shared package tests: `packages/*/tests/`

**Testing Frameworks:**
- **Frontend:** Vitest ^1.2.0 + Testing Library ^14.0.0
- **E2E:** Playwright ^1.40.0 for dual-pane interaction testing

**Testing Patterns:**
- Component testing for dual-pane layout primitives
- Integration testing for Supabase authentication flow  
- Build pipeline testing for monorepo package dependencies
- Hot-reload testing for development environment validation

**Specific Testing Requirements:**
- Test dual-pane responsive breakpoints
- Verify monorepo TypeScript path resolution
- Validate Supabase connection and authentication
- Test Vercel deployment pipeline with preview URLs
- Verify Sentry error tracking integration

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-24 | 1.0 | Initial story creation for Epic 1.1 Project Setup | BMad Master |

## Dev Agent Record

*(This section is owned by dev-agent and can only be modified by dev-agent)*

### Agent Model Used

*(To be populated by development agent during implementation)*

### Debug Log References

*(To be populated by development agent during implementation)*

### Completion Notes List

*(To be populated by development agent during implementation)*

### File List

*(To be populated by development agent during implementation)*

## QA Results

*(This section is owned by qa-agent and can only be modified by qa-agent)*