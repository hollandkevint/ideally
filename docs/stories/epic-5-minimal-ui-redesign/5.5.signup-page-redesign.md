# Story 5.5: Signup Page Redesign

## Status
Ready for Development

## Story
**As a** new user wanting to create a Thinkhaven account,
**I want** a simple, inviting signup page that makes registration quick and easy,
**so that** I can start using the platform without friction.

## Acceptance Criteria

### Functional Requirements
1. **Match Login Style**: Design matches Story 5.4 login page (centered form, minimal nav)
2. **Google OAuth Primary**: Google sign-up button appears first with same styling as login
3. **Simplified Fields**: Email and password only (no confirm password field)
4. **Work Email Label**: Input labeled "Work email" following Notion pattern
5. **Account Toggle**: "Already have an account? Log in" link at bottom
6. **Minimal Navigation**: Logo only in top-left corner (consistent with login)

### Integration Requirements
7. Existing Supabase signup logic works unchanged
8. OAuth flow creates new accounts with Google provider
9. Form validation matches login page patterns
10. Navigation to login page and welcome/onboarding routes work correctly

### Quality Requirements
11. Form is accessible via keyboard (consistent with login page)
12. Input fields have proper labels and ARIA attributes
13. Password strength indicator provides clear feedback
14. Terms of Service and Privacy Policy links are visible

## Tasks / Subtasks

- [ ] **Task 1: Page Layout and Navigation** (AC: 1, 6)
  - [ ] Subtask 1.1: Replicate login page layout (centered 400px max)
  - [ ] Subtask 1.2: Add minimal navigation with logo only
  - [ ] Subtask 1.3: Match login page whitespace and centering
  - [ ] Subtask 1.4: Ensure responsive mobile layout consistency

- [ ] **Task 2: Google OAuth Button** (AC: 2, 8)
  - [ ] Subtask 2.1: Create Google sign-up button (match login style)
  - [ ] Subtask 2.2: Style as outlined button identical to login
  - [ ] Subtask 2.3: Wire up existing Google OAuth signup handler
  - [ ] Subtask 2.4: Add loading state during OAuth redirect

- [ ] **Task 3: Email/Password Form** (AC: 3, 4, 7, 9)
  - [ ] Subtask 3.1: Create "OR" divider (match login page)
  - [ ] Subtask 3.2: Add "Work email" input with validation
  - [ ] Subtask 3.3: Add password input (single field, no confirm)
  - [ ] Subtask 3.4: Create full-width primary "Sign up" CTA
  - [ ] Subtask 3.5: Wire up existing email/password signup

- [ ] **Task 4: Password Strength and Helper Text** (AC: 13)
  - [ ] Subtask 4.1: Add password strength indicator below input
  - [ ] Subtask 4.2: Show requirements (min 8 characters, etc.)
  - [ ] Subtask 4.3: Style indicator with progressive colors
  - [ ] Subtask 4.4: Add helper text for password rules

- [ ] **Task 5: Terms and Account Toggle** (AC: 5, 14)
  - [ ] Subtask 5.1: Add "Already have an account? Log in" link
  - [ ] Subtask 5.2: Add Terms of Service and Privacy Policy links
  - [ ] Subtask 5.3: Style links with subtle muted color
  - [ ] Subtask 5.4: Wire up navigation to /login route

- [ ] **Task 6: Accessibility and Testing** (AC: 11, 12)
  - [ ] Subtask 6.1: Match login page accessibility patterns
  - [ ] Subtask 6.2: Implement keyboard navigation support
  - [ ] Subtask 6.3: Test tab order and focus states
  - [ ] Subtask 6.4: Run accessibility audit (axe DevTools)

## Dev Notes

### Previous Story Dependencies
**Requires Story 5.4 Completion**: Login page design should be complete first to ensure consistent styling patterns.

### Previous Story Insights
From Story 5.4 (Login Page):
- Centered form layout (400px max-width)
- Minimal navigation (logo only)
- OAuth button first (outlined style)
- OR divider design
- Form input styling and validation patterns
- Account toggle link styling

### Page Structure

**Signup Page Layout [Source: Original plan Section 3]:**

```
┌─────────────────────────────────────┐
│  ┌──────┐                           │  ← Logo (top-left)
│  │ Logo │                           │
│  └──────┘                           │
│                                     │
│         ┌───────────────┐           │
│         │               │           │
│         │  Signup Form  │           │  ← Centered (400px max)
│         │               │           │
│         │ [Google]      │           │  ← OAuth button
│         │    OR         │           │  ← Divider
│         │ Work email    │           │  ← Email input
│         │ Password      │           │  ← Password input (single)
│         │ [Strength]    │           │  ← Password strength indicator
│         │ [Sign up]     │           │  ← Primary CTA
│         │               │           │
│         │ Terms/Privacy │           │  ← Legal links
│         │ Log in →      │           │  ← Toggle link
│         │               │           │
│         └───────────────┘           │
│                                     │
└─────────────────────────────────────┘
```

### Component Specifications

**Form Container:**
- Identical to login page (400px max, centered)
- All spacing and layout match login page
- Clean white background, no borders

**Google OAuth Button:**
- Text: "Continue with Google" or "Sign up with Google"
- Styling identical to login page
- Same hover and loading states

**Work Email Input:**
- Label: "Work email" (not just "Email")
- Helper text: "We'll send your workspace invite here"
- Validation: Email format + domain suggestions (optional)

**Password Input:**
- Label: "Password"
- Single field (no confirm password)
- Show/hide toggle icon
- Helper text: "At least 8 characters"

**Password Strength Indicator:**
- Visual bar below password input
- Colors: red (weak), yellow (medium), green (strong)
- Text feedback: "Weak", "Medium", "Strong"
- Updates in real-time as user types

**Terms and Privacy:**
- Small text: "By signing up, you agree to our Terms and Privacy Policy"
- Links: Underlined, muted color
- Positioned above account toggle

**Account Toggle Link:**
- Text: "Already have an account? Log in"
- Styling matches login page toggle
- Center aligned

### File Locations

**Files to Modify:**
- `/apps/web/app/signup/page.tsx` - Complete signup page redesign

**Related Files (reference only):**
- `/apps/web/app/login/page.tsx` - Reference for consistent styling
- `/apps/web/app/components/ui/button.tsx` - Use for buttons
- `/apps/web/app/components/ui/input.tsx` - Use for form inputs
- `/apps/web/app/components/ui/label.tsx` - Use for input labels

### Technical Implementation Details

**Implementation Approach [Source: Original plan Section 3]:**
1. **Match login page** - Replicate login page structure and styling
2. **Simplified signup** - Remove confirm password field
3. **Work email focus** - Label emphasizes professional use
4. **Password strength** - Visual feedback for security
5. **Legal compliance** - Terms and Privacy links visible

**Authentication Integration:**
- OAuth: `signInWithOAuth({ provider: 'google' })` (creates account if new)
- Email/Password: `signUp({ email, password })`
- Email confirmation: Follow existing Supabase email verification flow
- Redirect: After signup, redirect to onboarding or dashboard

**Form Validation:**
- Email: Valid format, optionally check for business domains
- Password: Minimum 8 characters, strength calculation
- Submit disabled until validation passes
- Clear error messages for signup failures (email already exists, etc.)

**Password Strength Calculation:**
```typescript
// Simple strength check
const calculateStrength = (password: string) => {
  let strength = 0;
  if (password.length >= 8) strength++;
  if (password.length >= 12) strength++;
  if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
  if (/\d/.test(password)) strength++;
  if (/[^A-Za-z0-9]/.test(password)) strength++;

  if (strength <= 2) return 'weak';
  if (strength <= 4) return 'medium';
  return 'strong';
};
```

### Performance Requirements

- **Page Load**: < 1 second (match login page performance)
- **Form Responsiveness**: Input response < 100ms
- **Password Strength**: Calculate on every keystroke (< 50ms)

### Testing Requirements

**Testing Standards [Source: architecture/testing-strategy.md]:**
- E2E testing for signup flows
- Accessibility audit for forms
- Visual consistency with login page

**Specific Test Scenarios:**

1. **Signup Flow Testing:**
   - Google OAuth click initiates OAuth signup
   - Email/password signup creates account successfully
   - Duplicate email shows error message
   - Successful signup redirects to dashboard/onboarding
   - "Log in" link navigates to login page

2. **Form Validation:**
   - Empty email shows validation error
   - Invalid email format shows error
   - Short password shows validation error
   - Password strength indicator updates correctly

3. **Password Strength Testing:**
   - "12345678" shows as weak
   - "Password123" shows as medium
   - "P@ssw0rd!2024" shows as strong
   - Indicator color matches strength level

4. **Accessibility Testing:**
   - Keyboard navigation works correctly
   - Enter key submits form
   - Labels properly associated with inputs
   - Password strength announced to screen readers

5. **Visual Consistency:**
   - Layout matches login page exactly
   - Spacing and typography identical
   - Form elements styled consistently
   - OAuth button looks identical

### Technical Constraints

**Integration Requirements [Source: Epic 5 dependencies]:**
- Must preserve existing Supabase signup logic
- Must maintain current OAuth configuration
- Must match login page visual patterns exactly
- Must not introduce new authentication dependencies

**Scope Limitations:**
- Visual redesign only - no signup logic changes
- No new verification or validation rules
- No onboarding flow changes (existing flow maintained)
- Focus on clean, minimal UI matching login page

## Testing

### Testing Standards
- **E2E**: Playwright tests for signup flows
- **Unit**: Component tests for password strength
- **Accessibility**: axe DevTools scan
- **Visual**: Side-by-side comparison with login page

### Specific Testing Requirements

1. **E2E Test Cases:**
   ```typescript
   test('user can sign up with Google OAuth', async ({ page }) => {
     await page.goto('/signup');
     await page.click('text=Continue with Google');
     // Verify OAuth redirect initiated
   });

   test('user can sign up with email and password', async ({ page }) => {
     await page.goto('/signup');
     await page.fill('input[type="email"]', 'newuser@company.com');
     await page.fill('input[type="password"]', 'SecurePass123!');
     await page.click('text=Sign up');
     // Verify account creation and redirect
   });

   test('duplicate email shows error', async ({ page }) => {
     await page.goto('/signup');
     await page.fill('input[type="email"]', 'existing@example.com');
     await page.fill('input[type="password"]', 'password123');
     await page.click('text=Sign up');
     await expect(page.locator('text=Email already registered')).toBeVisible();
   });
   ```

2. **Password Strength Tests:**
   ```typescript
   test('password strength indicator updates correctly', async () => {
     const { result } = renderHook(() => usePasswordStrength());

     act(() => result.current.checkStrength('12345678'));
     expect(result.current.strength).toBe('weak');

     act(() => result.current.checkStrength('Password123'));
     expect(result.current.strength).toBe('medium');

     act(() => result.current.checkStrength('P@ssw0rd!2024'));
     expect(result.current.strength).toBe('strong');
   });
   ```

3. **Visual Consistency Validation:**
   - Take screenshots of login and signup pages
   - Compare layouts, spacing, and typography
   - Verify form elements match exactly
   - Check responsive breakpoints are identical

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-12-21 | 1.0 | Initial story creation for signup page redesign | John (Product Manager) |

## Dev Agent Record

*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results

*This section will be populated by the QA Agent upon story completion*
